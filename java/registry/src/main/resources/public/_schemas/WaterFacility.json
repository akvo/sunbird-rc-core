{
  "$schema": "http://json-schema.org/draft-07/schema",
  "type": "object",
  "title": "WaterFacility",
  "properties": {
    "WaterFacility": {
      "$ref": "#/definitions/WaterFacility"
    }
  },
  "required": ["WaterFacility"],
  "definitions": {
    "WaterFacility": {
      "$id": "#/properties/WaterFacility",
      "type": "object",
      "title": "Water Facility",
      "description": "Schema for water facilities",
      "required": [
        "geoCode",
        "location",
        "waterPointType"
      ],
      "properties": {
        "wfId": {
          "type": "string",
          "description": "System-generated unique Water Facility ID"
        },
        "geoCode": {
          "type": "string",
          "description": "Unique geographic code identifier"
        },
        "location": {
          "type": "object",
          "description": "Administrative location of the facility",
          "required": ["county", "district", "community"],
          "properties": {
            "county": {
              "type": "string",
              "description": "County name"
            },
            "district": {
              "type": "string",
              "description": "District name"
            },
            "community": {
              "type": "string",
              "description": "Community name"
            },
            "coordinates": {
              "type": "object",
              "description": "Geographic coordinates",
              "properties": {
                "lat": {
                  "type": "number",
                  "minimum": -90,
                  "maximum": 90,
                  "description": "Latitude coordinate"
                },
                "lon": {
                  "type": "number",
                  "minimum": -180,
                  "maximum": 180,
                  "description": "Longitude coordinate"
                },
                "elevation": {
                  "type": "number",
                  "description": "Elevation in meters"
                }
              }
            }
          }
        },
        "waterPointType": {
          "type": "string",
          "description": "Type of water point",
          "enum": [
            "Protected dug well",
            "Unprotected dug well",
            "Tube well or borehole",
            "Protected spring",
            "Unprotected spring",
            "Piped water into dwelling/plot/yard",
            "Public tap/standpipe",
            "Unequipped borehole",
            "Rainwater (harvesting)",
            "Sand/Sub-surface dam (with well or standpipe)",
            "Other"
          ]
        },
        "waterPointTypeOther": {
          "type": "string",
          "description": "Other water point type specification"
        },
        "extractionType": {
          "type": "string",
          "description": "Water extraction method",
          "enum": [
            "Manual",
            "Electrical",
            "Solar",
            "Other"
          ]
        },
        "extractionTypeOther": {
          "type": "string",
          "description": "Other extraction type specification"
        },
        "pumpType": {
          "type": "string",
          "description": "Type of pump installed",
          "enum": [
            "Afridev",
            "Consallen",
            "India Mark",
            "Kardia",
            "Rope pump",
            "Vergnet",
            "Other"
          ]
        },
        "pumpTypeOther": {
          "type": "string",
          "description": "Other pump type specification"
        },
        "numTaps": {
          "type": "number",
          "minimum": 0,
          "description": "Number of taps"
        },
        "hasDepthInfo": {
          "type": "boolean",
          "description": "Whether depth information is available"
        },
        "depthMetres": {
          "type": "number",
          "minimum": 0,
          "description": "Depth in metres"
        },
        "installer": {
          "type": "string",
          "description": "Entity that installed the water point",
          "enum": [
            "Government",
            "NGO",
            "Private",
            "Other"
          ]
        },
        "installerOther": {
          "type": "string",
          "description": "Other installer specification"
        },
        "owner": {
          "type": "string",
          "description": "Owner of the water point",
          "enum": [
            "Community",
            "Private Individual",
            "School",
            "NGO",
            "Health Facility",
            "Other institution",
            "CBO",
            "Private",
            "Unknown",
            "Other"
          ]
        },
        "funder": {
          "type": "string",
          "description": "Funding organization or entity"
        },
        "photoUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL to photo of the water point"
        }
      }
    }
  },
  "_osConfig": {
    "privateFields": [],
    "signedFields": ["wfId", "geoCode", "waterPointType", "location"],
    "indexFields": [
      "wfId",
      "geoCode",
      "waterPointType",
      "location.county",
      "location.district"
    ],
    "uniqueIndexFields": ["wfId"],
    "uniqueIdentifierFields": [
      {
        "field": "/wfId",
        "idName": "waterfacility.wfId",
        "format": "WF-[HASH]"
      }
    ],
    "systemFields": [
      "osCreatedAt",
      "osUpdatedAt",
      "osCreatedBy",
      "osUpdatedBy"
    ],
    "roles": ["admin"],
    "inviteRoles": ["anonymous"],
    "ownershipAttributes": [],
    "credentialTemplate": {
      "@context": [
        "https://www.w3.org/2018/credentials/v1",
        {
          "@context": {
            "@version": 1.1,
            "@protected": true,
            "WaterFacility": {
              "@id": "https://sunbird-rc.akvotest.org/vc/WaterFacility",
              "@context": {
                "id": "@id",
                "@version": 1.1,
                "@protected": true,
                "wfId": "schema:Text",
                "geoCode": "schema:Text",
                "waterPointType": "schema:Text",
                "extractionType": "schema:Text",
                "pumpType": "schema:Text",
                "owner": "schema:Text",
                "funder": "schema:Text",
                "installer": "schema:Text",
                "county": "schema:Text",
                "district": "schema:Text",
                "community": "schema:Text"
              }
            }
          }
        }
      ],
      "type": ["VerifiableCredential"],
      "issuanceDate": "2021-08-27T10:57:57.237Z",
      "credentialSubject": {
        "type": "WaterFacility",
        "wfId": "{{wfId}}",
        "geoCode": "{{geoCode}}",
        "waterPointType": "{{waterPointType}}",
        "extractionType": "{{extractionType}}",
        "pumpType": "{{pumpType}}",
        "owner": "{{owner}}",
        "county": "{{location.county}}",
        "district": "{{location.district}}",
        "community": "{{location.community}}"
      },
      "issuer": "did:web:sunbird-rc.akvotest.org"
    },
    "certificateTemplates": {
      "html": "http://nginx/templates/WaterFacility.html"
    }
  }
}
