{
  "$schema": "http://json-schema.org/draft-07/schema",
  "type": "object",
  "title": "WaterFacility",
  "properties": {
    "WaterFacility": {
      "$ref": "#/definitions/WaterFacility"
    }
  },
  "required": ["WaterFacility"],
  "definitions": {
    "WaterFacility": {
      "$id": "#/properties/WaterFacility",
      "type": "object",
      "title": "Water Facility",
      "description": "Schema for water facilities",
      "required": [
        "wfName",
        "typeOfWaterFacility",
        "location",
        "institution",
        "foundingDate"
      ],
      "properties": {
        "wfId": {
          "type": "string",
          "description": "System-generated unique Water Facility ID"
        },
        "wfName": {
          "type": "string",
          "description": "Name of the Water Facility"
        },
        "typeOfWaterFacility": {
          "type": "string",
          "description": "Type of the Water Facility",
          "enum": [
            "Water Treatment Plant",
            "Reservoir",
            "Pumping Station",
            "Distribution Center",
            "Desalination Plant"
          ]
        },
        "location": {
          "type": "object",
          "description": "Administrative location of the facility",
          "required": ["province", "district", "village"],
          "properties": {
            "province": {
              "type": "string",
              "description": "Province name"
            },
            "district": {
              "type": "string",
              "description": "District / Regency name"
            },
            "village": {
              "type": "string",
              "description": "Village / Sub-district name"
            }
          }
        },
        "address": {
          "type": "string",
          "description": "Free-text address (optional)"
        },
        "institution": {
          "type": "string",
          "description": "Responsible institution"
        },
        "foundingDate": {
          "type": "string",
          "format": "date",
          "description": "Date of establishment (YYYY-MM-DD)"
        },
        "waterCapacity": {
          "type": "number",
          "minimum": 0,
          "maximum": 1000000,
          "description": "Water capacity in cubic meters"
        }
      }
    }
  },
  "_osConfig": {
    "privateFields": [],
    "signedFields": [],
    "indexFields": [
      "wfId",
      "wfName",
      "typeOfWaterFacility",
      "location.province",
      "location.district"
    ],
    "uniqueIndexFields": ["wfId"],
    "uniqueIdentifierFields": [
      {
        "field": "/wfId",
        "idName": "waterfacility.wfId",
        "format": "WF-[HASH]"
      }
    ],
    "systemFields": [
      "osCreatedAt",
      "osUpdatedAt",
      "osCreatedBy",
      "osUpdatedBy"
    ],
    "roles": ["admin"],
    "inviteRoles": ["anonymous"],
    "ownershipAttributes": []
  }
}
